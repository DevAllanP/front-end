{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Workspace\\\\Workspace_2\\\\Project\\\\E-Commerce\\\\front-end\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/auth/auth.service\";\nimport * as i3 from \"src/app/services/paiement.service\";\nimport * as i4 from \"src/app/services/utilisateur.service\";\n\nconst Stripe = require('stripe');\n\nconst stripe = Stripe('sk_test_51Kb3R1ASJH3PI53qo0Des8MLgewbQeQ1ieWwchtLaBPibiswwGD23KGh4uarku5jXWE0GKkETeocvljwz0NpuPKT00K6qaIsTV');\nexport class StripePaiementComponent {\n  constructor(fb, authService, paiementService, service) {\n    this.fb = fb;\n    this.authService = authService;\n    this.paiementService = paiementService;\n    this.service = service; // This is your test publishable API key.\n\n    this.stripe = \"pk_test_51Kb3R1ASJH3PI53qIMReKI1VHjOxF14Apm5MH9qIckiKYhGDFoGDx2n59ijkBpvdef9gpDUU8g9vA0FzqVKSIXXD008WQPy3xd\"; // The items the customer wants to buy\n\n    this.items = [{\n      id: \"xl-tshirt\"\n    }];\n    this.paiement = this.fb.group({\n      nom: ['', Validators.required],\n      prix: ['', Validators.required],\n      price: ['', Validators.required]\n    });\n  }\n\n  ngOnInit() {\n    this.authService.currentUser.subscribe({\n      next: u => {\n        this.paiementService.getOrder().subscribe();\n        console.log(u);\n        this.currentUser = u;\n      }\n    });\n  }\n\n  onSubmit() {\n    this.paiementService.cree;\n  }\n\n}\n\nStripePaiementComponent.ɵfac = function StripePaiementComponent_Factory(t) {\n  return new (t || StripePaiementComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.PaiementService), i0.ɵɵdirectiveInject(i4.UtilisateurService));\n};\n\nStripePaiementComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: StripePaiementComponent,\n  selectors: [[\"app-stripe-paiement\"]],\n  decls: 15,\n  vars: 0,\n  consts: [[\"lang\", \"en\"], [\"charset\", \"utf-8\"], [\"name\", \"description\", \"content\", \"A demo of a payment on Stripe\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1\"], [\"id\", \"payment-form\"], [\"id\", \"payment-element\"], [\"id\", \"submit\"], [\"id\", \"spinner\", 1, \"spinner\", \"hidden\"], [\"id\", \"button-text\"], [\"id\", \"payment-message\", 1, \"hidden\"]],\n  template: function StripePaiementComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n      i0.ɵɵelement(2, \"meta\", 1);\n      i0.ɵɵelementStart(3, \"title\");\n      i0.ɵɵtext(4, \"Accept a payment\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(5, \"meta\", 2)(6, \"meta\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"body\")(8, \"form\", 4);\n      i0.ɵɵelement(9, \"div\", 5);\n      i0.ɵɵelementStart(10, \"button\", 6);\n      i0.ɵɵelement(11, \"div\", 7);\n      i0.ɵɵelementStart(12, \"span\", 8);\n      i0.ɵɵtext(13, \"Pay now\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(14, \"div\", 9);\n      i0.ɵɵelementEnd()()();\n    }\n  },\n  styles: [\"*[_ngcontent-%COMP%] {\\r\\n    box-sizing: border-box;\\r\\n  }\\r\\nbody[_ngcontent-%COMP%] {\\r\\n    font-family: -apple-system, BlinkMacSystemFont, sans-serif;\\r\\n    font-size: 16px;\\r\\n    -webkit-font-smoothing: antialiased;\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    align-content: center;\\r\\n    height: 100vh;\\r\\n    width: 100vw;\\r\\n  }\\r\\nform[_ngcontent-%COMP%] {\\r\\n    width: 30vw;\\r\\n    min-width: 500px;\\r\\n    align-self: center;\\r\\n    box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),\\r\\n      0px 2px 5px 0px rgba(50, 50, 93, 0.1), 0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);\\r\\n    border-radius: 7px;\\r\\n    padding: 40px;\\r\\n  }\\r\\n.hidden[_ngcontent-%COMP%] {\\r\\n    display: none;\\r\\n  }\\r\\n#payment-message[_ngcontent-%COMP%] {\\r\\n    color: rgb(105, 115, 134);\\r\\n    font-size: 16px;\\r\\n    line-height: 20px;\\r\\n    padding-top: 12px;\\r\\n    text-align: center;\\r\\n  }\\r\\n#payment-element[_ngcontent-%COMP%] {\\r\\n    margin-bottom: 24px;\\r\\n  }\\r\\n\\r\\nbutton[_ngcontent-%COMP%] {\\r\\n    background: #5469d4;\\r\\n    font-family: Arial, sans-serif;\\r\\n    color: #ffffff;\\r\\n    border-radius: 4px;\\r\\n    border: 0;\\r\\n    padding: 12px 16px;\\r\\n    font-size: 16px;\\r\\n    font-weight: 600;\\r\\n    cursor: pointer;\\r\\n    display: block;\\r\\n    transition: all 0.2s ease;\\r\\n    box-shadow: 0px 4px 5.5px 0px rgba(0, 0, 0, 0.07);\\r\\n    width: 100%;\\r\\n  }\\r\\nbutton[_ngcontent-%COMP%]:hover {\\r\\n    filter: contrast(115%);\\r\\n  }\\r\\nbutton[_ngcontent-%COMP%]:disabled {\\r\\n    opacity: 0.5;\\r\\n    cursor: default;\\r\\n  }\\r\\n\\r\\n.spinner[_ngcontent-%COMP%], .spinner[_ngcontent-%COMP%]:before, .spinner[_ngcontent-%COMP%]:after {\\r\\n    border-radius: 50%;\\r\\n  }\\r\\n.spinner[_ngcontent-%COMP%] {\\r\\n    color: #ffffff;\\r\\n    font-size: 22px;\\r\\n    text-indent: -99999px;\\r\\n    margin: 0px auto;\\r\\n    position: relative;\\r\\n    width: 20px;\\r\\n    height: 20px;\\r\\n    box-shadow: inset 0 0 0 2px;\\r\\n    transform: translateZ(0);\\r\\n  }\\r\\n.spinner[_ngcontent-%COMP%]:before, .spinner[_ngcontent-%COMP%]:after {\\r\\n    position: absolute;\\r\\n    content: \\\"\\\";\\r\\n  }\\r\\n.spinner[_ngcontent-%COMP%]:before {\\r\\n    width: 10.4px;\\r\\n    height: 20.4px;\\r\\n    background: #5469d4;\\r\\n    border-radius: 20.4px 0 0 20.4px;\\r\\n    top: -0.2px;\\r\\n    left: -0.2px;\\r\\n    transform-origin: 10.4px 10.2px;\\r\\n    animation: loading 2s infinite ease 1.5s;\\r\\n  }\\r\\n.spinner[_ngcontent-%COMP%]:after {\\r\\n    width: 10.4px;\\r\\n    height: 10.2px;\\r\\n    background: #5469d4;\\r\\n    border-radius: 0 10.2px 10.2px 0;\\r\\n    top: -0.1px;\\r\\n    left: 10.2px;\\r\\n    transform-origin: 0px 10.2px;\\r\\n    animation: loading 2s infinite ease;\\r\\n  }\\r\\n@keyframes loading {\\r\\n    0% {\\r\\n      transform: rotate(0deg);\\r\\n    }\\r\\n    100% {\\r\\n      transform: rotate(360deg);\\r\\n    }\\r\\n  }\\r\\n@media only screen and (max-width: 600px) {\\r\\n    form[_ngcontent-%COMP%] {\\r\\n      width: 80vw;\\r\\n      min-width: initial;\\r\\n    }\\r\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0cmlwZS1wYWllbWVudC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGNBQWM7QUFDZDtJQUNJLHNCQUFzQjtFQUN4QjtBQUVBO0lBQ0UsMERBQTBEO0lBQzFELGVBQWU7SUFDZixtQ0FBbUM7SUFDbkMsYUFBYTtJQUNiLHVCQUF1QjtJQUN2QixxQkFBcUI7SUFDckIsYUFBYTtJQUNiLFlBQVk7RUFDZDtBQUVBO0lBQ0UsV0FBVztJQUNYLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEI7a0ZBQzhFO0lBQzlFLGtCQUFrQjtJQUNsQixhQUFhO0VBQ2Y7QUFFQTtJQUNFLGFBQWE7RUFDZjtBQUVBO0lBQ0UseUJBQXlCO0lBQ3pCLGVBQWU7SUFDZixpQkFBaUI7SUFDakIsaUJBQWlCO0lBQ2pCLGtCQUFrQjtFQUNwQjtBQUVBO0lBQ0UsbUJBQW1CO0VBQ3JCO0FBRUEsc0JBQXNCO0FBQ3RCO0lBQ0UsbUJBQW1CO0lBQ25CLDhCQUE4QjtJQUM5QixjQUFjO0lBQ2Qsa0JBQWtCO0lBQ2xCLFNBQVM7SUFDVCxrQkFBa0I7SUFDbEIsZUFBZTtJQUNmLGdCQUFnQjtJQUNoQixlQUFlO0lBQ2YsY0FBYztJQUNkLHlCQUF5QjtJQUN6QixpREFBaUQ7SUFDakQsV0FBVztFQUNiO0FBQ0E7SUFDRSxzQkFBc0I7RUFDeEI7QUFDQTtJQUNFLFlBQVk7SUFDWixlQUFlO0VBQ2pCO0FBRUEscUNBQXFDO0FBQ3JDOzs7SUFHRSxrQkFBa0I7RUFDcEI7QUFDQTtJQUNFLGNBQWM7SUFDZCxlQUFlO0lBQ2YscUJBQXFCO0lBQ3JCLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEIsV0FBVztJQUNYLFlBQVk7SUFDWiwyQkFBMkI7SUFHM0Isd0JBQXdCO0VBQzFCO0FBQ0E7O0lBRUUsa0JBQWtCO0lBQ2xCLFdBQVc7RUFDYjtBQUNBO0lBQ0UsYUFBYTtJQUNiLGNBQWM7SUFDZCxtQkFBbUI7SUFDbkIsZ0NBQWdDO0lBQ2hDLFdBQVc7SUFDWCxZQUFZO0lBRVosK0JBQStCO0lBRS9CLHdDQUF3QztFQUMxQztBQUNBO0lBQ0UsYUFBYTtJQUNiLGNBQWM7SUFDZCxtQkFBbUI7SUFDbkIsZ0NBQWdDO0lBQ2hDLFdBQVc7SUFDWCxZQUFZO0lBRVosNEJBQTRCO0lBRTVCLG1DQUFtQztFQUNyQztBQVlBO0lBQ0U7TUFFRSx1QkFBdUI7SUFDekI7SUFDQTtNQUVFLHlCQUF5QjtJQUMzQjtFQUNGO0FBRUE7SUFDRTtNQUNFLFdBQVc7TUFDWCxrQkFBa0I7SUFDcEI7RUFDRiIsImZpbGUiOiJzdHJpcGUtcGFpZW1lbnQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIFZhcmlhYmxlcyAqL1xyXG4qIHtcclxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgfVxyXG4gIFxyXG4gIGJvZHkge1xyXG4gICAgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgc2Fucy1zZXJpZjtcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICAgIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgYWxpZ24tY29udGVudDogY2VudGVyO1xyXG4gICAgaGVpZ2h0OiAxMDB2aDtcclxuICAgIHdpZHRoOiAxMDB2dztcclxuICB9XHJcbiAgXHJcbiAgZm9ybSB7XHJcbiAgICB3aWR0aDogMzB2dztcclxuICAgIG1pbi13aWR0aDogNTAwcHg7XHJcbiAgICBhbGlnbi1zZWxmOiBjZW50ZXI7XHJcbiAgICBib3gtc2hhZG93OiAwcHggMHB4IDBweCAwLjVweCByZ2JhKDUwLCA1MCwgOTMsIDAuMSksXHJcbiAgICAgIDBweCAycHggNXB4IDBweCByZ2JhKDUwLCA1MCwgOTMsIDAuMSksIDBweCAxcHggMS41cHggMHB4IHJnYmEoMCwgMCwgMCwgMC4wNyk7XHJcbiAgICBib3JkZXItcmFkaXVzOiA3cHg7XHJcbiAgICBwYWRkaW5nOiA0MHB4O1xyXG4gIH1cclxuICBcclxuICAuaGlkZGVuIHtcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgfVxyXG4gIFxyXG4gICNwYXltZW50LW1lc3NhZ2Uge1xyXG4gICAgY29sb3I6IHJnYigxMDUsIDExNSwgMTM0KTtcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICAgIGxpbmUtaGVpZ2h0OiAyMHB4O1xyXG4gICAgcGFkZGluZy10b3A6IDEycHg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgfVxyXG4gIFxyXG4gICNwYXltZW50LWVsZW1lbnQge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMjRweDtcclxuICB9XHJcbiAgXHJcbiAgLyogQnV0dG9ucyBhbmQgbGlua3MgKi9cclxuICBidXR0b24ge1xyXG4gICAgYmFja2dyb3VuZDogIzU0NjlkNDtcclxuICAgIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjtcclxuICAgIGNvbG9yOiAjZmZmZmZmO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgYm9yZGVyOiAwO1xyXG4gICAgcGFkZGluZzogMTJweCAxNnB4O1xyXG4gICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcclxuICAgIGJveC1zaGFkb3c6IDBweCA0cHggNS41cHggMHB4IHJnYmEoMCwgMCwgMCwgMC4wNyk7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICB9XHJcbiAgYnV0dG9uOmhvdmVyIHtcclxuICAgIGZpbHRlcjogY29udHJhc3QoMTE1JSk7XHJcbiAgfVxyXG4gIGJ1dHRvbjpkaXNhYmxlZCB7XHJcbiAgICBvcGFjaXR5OiAwLjU7XHJcbiAgICBjdXJzb3I6IGRlZmF1bHQ7XHJcbiAgfVxyXG4gIFxyXG4gIC8qIHNwaW5uZXIvcHJvY2Vzc2luZyBzdGF0ZSwgZXJyb3JzICovXHJcbiAgLnNwaW5uZXIsXHJcbiAgLnNwaW5uZXI6YmVmb3JlLFxyXG4gIC5zcGlubmVyOmFmdGVyIHtcclxuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICB9XHJcbiAgLnNwaW5uZXIge1xyXG4gICAgY29sb3I6ICNmZmZmZmY7XHJcbiAgICBmb250LXNpemU6IDIycHg7XHJcbiAgICB0ZXh0LWluZGVudDogLTk5OTk5cHg7XHJcbiAgICBtYXJnaW46IDBweCBhdXRvO1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgd2lkdGg6IDIwcHg7XHJcbiAgICBoZWlnaHQ6IDIwcHg7XHJcbiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCAycHg7XHJcbiAgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTtcclxuICAgIC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7XHJcbiAgfVxyXG4gIC5zcGlubmVyOmJlZm9yZSxcclxuICAuc3Bpbm5lcjphZnRlciB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBjb250ZW50OiBcIlwiO1xyXG4gIH1cclxuICAuc3Bpbm5lcjpiZWZvcmUge1xyXG4gICAgd2lkdGg6IDEwLjRweDtcclxuICAgIGhlaWdodDogMjAuNHB4O1xyXG4gICAgYmFja2dyb3VuZDogIzU0NjlkNDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDIwLjRweCAwIDAgMjAuNHB4O1xyXG4gICAgdG9wOiAtMC4ycHg7XHJcbiAgICBsZWZ0OiAtMC4ycHg7XHJcbiAgICAtd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IDEwLjRweCAxMC4ycHg7XHJcbiAgICB0cmFuc2Zvcm0tb3JpZ2luOiAxMC40cHggMTAuMnB4O1xyXG4gICAgLXdlYmtpdC1hbmltYXRpb246IGxvYWRpbmcgMnMgaW5maW5pdGUgZWFzZSAxLjVzO1xyXG4gICAgYW5pbWF0aW9uOiBsb2FkaW5nIDJzIGluZmluaXRlIGVhc2UgMS41cztcclxuICB9XHJcbiAgLnNwaW5uZXI6YWZ0ZXIge1xyXG4gICAgd2lkdGg6IDEwLjRweDtcclxuICAgIGhlaWdodDogMTAuMnB4O1xyXG4gICAgYmFja2dyb3VuZDogIzU0NjlkNDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDAgMTAuMnB4IDEwLjJweCAwO1xyXG4gICAgdG9wOiAtMC4xcHg7XHJcbiAgICBsZWZ0OiAxMC4ycHg7XHJcbiAgICAtd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IDBweCAxMC4ycHg7XHJcbiAgICB0cmFuc2Zvcm0tb3JpZ2luOiAwcHggMTAuMnB4O1xyXG4gICAgLXdlYmtpdC1hbmltYXRpb246IGxvYWRpbmcgMnMgaW5maW5pdGUgZWFzZTtcclxuICAgIGFuaW1hdGlvbjogbG9hZGluZyAycyBpbmZpbml0ZSBlYXNlO1xyXG4gIH1cclxuICBcclxuICBALXdlYmtpdC1rZXlmcmFtZXMgbG9hZGluZyB7XHJcbiAgICAwJSB7XHJcbiAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XHJcbiAgICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xyXG4gICAgfVxyXG4gICAgMTAwJSB7XHJcbiAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTtcclxuICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTtcclxuICAgIH1cclxuICB9XHJcbiAgQGtleWZyYW1lcyBsb2FkaW5nIHtcclxuICAgIDAlIHtcclxuICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcclxuICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XHJcbiAgICB9XHJcbiAgICAxMDAlIHtcclxuICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xyXG4gICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7XHJcbiAgICBmb3JtIHtcclxuICAgICAgd2lkdGg6IDgwdnc7XHJcbiAgICAgIG1pbi13aWR0aDogaW5pdGlhbDtcclxuICAgIH1cclxuICB9Il19 */\"]\n}); // Fetches a payment intent and captures the client secret\n\nfunction initialize(_x) {\n  return _initialize.apply(this, arguments);\n}\n\nfunction _initialize() {\n  _initialize = _asyncToGenerator(function* (elements) {\n    const response = yield fetch(\"/create-payment-intent\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        items\n      })\n    });\n    const {\n      clientSecret\n    } = yield response.json();\n    const appearance = {\n      theme: 'stripe'\n    };\n    elements = stripe.elements({\n      appearance,\n      clientSecret\n    });\n    const paymentElement = elements.create(\"payment\");\n    paymentElement.mount(\"#payment-element\");\n  });\n  return _initialize.apply(this, arguments);\n}\n\nfunction handleSubmit(_x2) {\n  return _handleSubmit.apply(this, arguments);\n} // Fetches the payment intent status after payment submission\n\n\nfunction _handleSubmit() {\n  _handleSubmit = _asyncToGenerator(function* (e) {\n    e.preventDefault();\n    setLoading(true);\n    const {\n      error\n    } = yield stripe.confirmPayment({\n      confirmParams: {\n        // Make sure to change this to your payment completion page\n        return_url: \"http://localhost:4200/test\"\n      }\n    }); // This point will only be reached if there is an immediate error when\n    // confirming the payment. Otherwise, your customer will be redirected to\n    // your `return_url`. For some payment methods like iDEAL, your customer will\n    // be redirected to an intermediate site first to authorize the payment, then\n    // redirected to the `return_url`.\n\n    if (error.type === \"card_error\" || error.type === \"validation_error\") {\n      showMessage(error.message);\n    } else {\n      showMessage(\"An unexpected error occured.\");\n    }\n\n    setLoading(false);\n  });\n  return _handleSubmit.apply(this, arguments);\n}\n\nfunction checkStatus() {\n  return _checkStatus.apply(this, arguments);\n} // ------- UI helpers -------\n\n\nfunction _checkStatus() {\n  _checkStatus = _asyncToGenerator(function* () {\n    const clientSecret = new URLSearchParams(window.location.search).get(\"payment_intent_client_secret\");\n\n    if (!clientSecret) {\n      return;\n    }\n\n    const {\n      paymentIntent\n    } = yield stripe.retrievePaymentIntent(clientSecret);\n\n    switch (paymentIntent.status) {\n      case \"succeeded\":\n        showMessage(\"Payment succeeded!\");\n        break;\n\n      case \"processing\":\n        showMessage(\"Your payment is processing.\");\n        break;\n\n      case \"requires_payment_method\":\n        showMessage(\"Your payment was not successful, please try again.\");\n        break;\n\n      default:\n        showMessage(\"Something went wrong.\");\n        break;\n    }\n  });\n  return _checkStatus.apply(this, arguments);\n}\n\nfunction showMessage(messageText) {\n  const messageContainer = document.querySelector(\"#payment-message\");\n  messageContainer.classList.remove(\"hidden\");\n  messageContainer.textContent = messageText;\n  setTimeout(function () {\n    messageContainer.classList.add(\"hidden\");\n    messageText.textContent = \"\";\n  }, 4000);\n} // Show a spinner on payment submission\n\n\nfunction setLoading(isLoading) {\n  if (isLoading) {\n    // Disable the button and show a spinner\n    document.querySelector(\"#submit\").disabled = true;\n    document.querySelector(\"#spinner\").classList.remove(\"hidden\");\n    document.querySelector(\"#button-text\").classList.add(\"hidden\");\n  } else {\n    document.querySelector(\"#submit\").disabled = false;\n    document.querySelector(\"#spinner\").classList.add(\"hidden\");\n    document.querySelector(\"#button-text\").classList.remove(\"hidden\");\n  }\n}","map":{"version":3,"sources":["C:/Workspace/Workspace_2/Project/E-Commerce/front-end/src/app/modules/stripe-paiement/stripe-paiement.component.ts"],"names":["Validators","i0","i1","i2","i3","i4","Stripe","require","stripe","StripePaiementComponent","constructor","fb","authService","paiementService","service","items","id","paiement","group","nom","required","prix","price","ngOnInit","currentUser","subscribe","next","u","getOrder","console","log","onSubmit","cree","ɵfac","StripePaiementComponent_Factory","t","ɵɵdirectiveInject","FormBuilder","AuthService","PaiementService","UtilisateurService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","StripePaiementComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","styles","initialize","elements","response","fetch","method","headers","body","JSON","stringify","clientSecret","json","appearance","theme","paymentElement","create","mount","handleSubmit","e","preventDefault","setLoading","error","confirmPayment","confirmParams","return_url","showMessage","message","checkStatus","URLSearchParams","window","location","search","get","paymentIntent","retrievePaymentIntent","status","messageText","messageContainer","document","querySelector","classList","remove","textContent","setTimeout","add","isLoading","disabled"],"mappings":"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","sourcesContent":["import { Validators } from '@angular/forms';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/forms\";\r\nimport * as i2 from \"src/app/auth/auth.service\";\r\nimport * as i3 from \"src/app/services/paiement.service\";\r\nimport * as i4 from \"src/app/services/utilisateur.service\";\r\nconst Stripe = require('stripe');\r\nconst stripe = Stripe('sk_test_51Kb3R1ASJH3PI53qo0Des8MLgewbQeQ1ieWwchtLaBPibiswwGD23KGh4uarku5jXWE0GKkETeocvljwz0NpuPKT00K6qaIsTV');\r\nexport class StripePaiementComponent {\r\n    constructor(fb, authService, paiementService, service) {\r\n        this.fb = fb;\r\n        this.authService = authService;\r\n        this.paiementService = paiementService;\r\n        this.service = service;\r\n        // This is your test publishable API key.\r\n        this.stripe = \"pk_test_51Kb3R1ASJH3PI53qIMReKI1VHjOxF14Apm5MH9qIckiKYhGDFoGDx2n59ijkBpvdef9gpDUU8g9vA0FzqVKSIXXD008WQPy3xd\";\r\n        // The items the customer wants to buy\r\n        this.items = [{ id: \"xl-tshirt\" }];\r\n        this.paiement = this.fb.group({\r\n            nom: ['', Validators.required],\r\n            prix: ['', Validators.required],\r\n            price: ['', Validators.required]\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        this.authService.currentUser.subscribe({\r\n            next: (u) => {\r\n                this.paiementService.getOrder().subscribe();\r\n                console.log(u);\r\n                this.currentUser = u;\r\n            },\r\n        });\r\n    }\r\n    onSubmit() {\r\n        this.paiementService.cree;\r\n    }\r\n}\r\nStripePaiementComponent.ɵfac = function StripePaiementComponent_Factory(t) { return new (t || StripePaiementComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.PaiementService), i0.ɵɵdirectiveInject(i4.UtilisateurService)); };\r\nStripePaiementComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: StripePaiementComponent, selectors: [[\"app-stripe-paiement\"]], decls: 15, vars: 0, consts: [[\"lang\", \"en\"], [\"charset\", \"utf-8\"], [\"name\", \"description\", \"content\", \"A demo of a payment on Stripe\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1\"], [\"id\", \"payment-form\"], [\"id\", \"payment-element\"], [\"id\", \"submit\"], [\"id\", \"spinner\", 1, \"spinner\", \"hidden\"], [\"id\", \"button-text\"], [\"id\", \"payment-message\", 1, \"hidden\"]], template: function StripePaiementComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\r\n        i0.ɵɵelement(2, \"meta\", 1);\r\n        i0.ɵɵelementStart(3, \"title\");\r\n        i0.ɵɵtext(4, \"Accept a payment\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(5, \"meta\", 2)(6, \"meta\", 3);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(7, \"body\")(8, \"form\", 4);\r\n        i0.ɵɵelement(9, \"div\", 5);\r\n        i0.ɵɵelementStart(10, \"button\", 6);\r\n        i0.ɵɵelement(11, \"div\", 7);\r\n        i0.ɵɵelementStart(12, \"span\", 8);\r\n        i0.ɵɵtext(13, \"Pay now\");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelement(14, \"div\", 9);\r\n        i0.ɵɵelementEnd()()();\r\n    } }, styles: [\"*[_ngcontent-%COMP%] {\\r\\n    box-sizing: border-box;\\r\\n  }\\r\\nbody[_ngcontent-%COMP%] {\\r\\n    font-family: -apple-system, BlinkMacSystemFont, sans-serif;\\r\\n    font-size: 16px;\\r\\n    -webkit-font-smoothing: antialiased;\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    align-content: center;\\r\\n    height: 100vh;\\r\\n    width: 100vw;\\r\\n  }\\r\\nform[_ngcontent-%COMP%] {\\r\\n    width: 30vw;\\r\\n    min-width: 500px;\\r\\n    align-self: center;\\r\\n    box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),\\r\\n      0px 2px 5px 0px rgba(50, 50, 93, 0.1), 0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);\\r\\n    border-radius: 7px;\\r\\n    padding: 40px;\\r\\n  }\\r\\n.hidden[_ngcontent-%COMP%] {\\r\\n    display: none;\\r\\n  }\\r\\n#payment-message[_ngcontent-%COMP%] {\\r\\n    color: rgb(105, 115, 134);\\r\\n    font-size: 16px;\\r\\n    line-height: 20px;\\r\\n    padding-top: 12px;\\r\\n    text-align: center;\\r\\n  }\\r\\n#payment-element[_ngcontent-%COMP%] {\\r\\n    margin-bottom: 24px;\\r\\n  }\\r\\n\\r\\nbutton[_ngcontent-%COMP%] {\\r\\n    background: #5469d4;\\r\\n    font-family: Arial, sans-serif;\\r\\n    color: #ffffff;\\r\\n    border-radius: 4px;\\r\\n    border: 0;\\r\\n    padding: 12px 16px;\\r\\n    font-size: 16px;\\r\\n    font-weight: 600;\\r\\n    cursor: pointer;\\r\\n    display: block;\\r\\n    transition: all 0.2s ease;\\r\\n    box-shadow: 0px 4px 5.5px 0px rgba(0, 0, 0, 0.07);\\r\\n    width: 100%;\\r\\n  }\\r\\nbutton[_ngcontent-%COMP%]:hover {\\r\\n    filter: contrast(115%);\\r\\n  }\\r\\nbutton[_ngcontent-%COMP%]:disabled {\\r\\n    opacity: 0.5;\\r\\n    cursor: default;\\r\\n  }\\r\\n\\r\\n.spinner[_ngcontent-%COMP%], .spinner[_ngcontent-%COMP%]:before, .spinner[_ngcontent-%COMP%]:after {\\r\\n    border-radius: 50%;\\r\\n  }\\r\\n.spinner[_ngcontent-%COMP%] {\\r\\n    color: #ffffff;\\r\\n    font-size: 22px;\\r\\n    text-indent: -99999px;\\r\\n    margin: 0px auto;\\r\\n    position: relative;\\r\\n    width: 20px;\\r\\n    height: 20px;\\r\\n    box-shadow: inset 0 0 0 2px;\\r\\n    transform: translateZ(0);\\r\\n  }\\r\\n.spinner[_ngcontent-%COMP%]:before, .spinner[_ngcontent-%COMP%]:after {\\r\\n    position: absolute;\\r\\n    content: \\\"\\\";\\r\\n  }\\r\\n.spinner[_ngcontent-%COMP%]:before {\\r\\n    width: 10.4px;\\r\\n    height: 20.4px;\\r\\n    background: #5469d4;\\r\\n    border-radius: 20.4px 0 0 20.4px;\\r\\n    top: -0.2px;\\r\\n    left: -0.2px;\\r\\n    transform-origin: 10.4px 10.2px;\\r\\n    animation: loading 2s infinite ease 1.5s;\\r\\n  }\\r\\n.spinner[_ngcontent-%COMP%]:after {\\r\\n    width: 10.4px;\\r\\n    height: 10.2px;\\r\\n    background: #5469d4;\\r\\n    border-radius: 0 10.2px 10.2px 0;\\r\\n    top: -0.1px;\\r\\n    left: 10.2px;\\r\\n    transform-origin: 0px 10.2px;\\r\\n    animation: loading 2s infinite ease;\\r\\n  }\\r\\n@keyframes loading {\\r\\n    0% {\\r\\n      transform: rotate(0deg);\\r\\n    }\\r\\n    100% {\\r\\n      transform: rotate(360deg);\\r\\n    }\\r\\n  }\\r\\n@media only screen and (max-width: 600px) {\\r\\n    form[_ngcontent-%COMP%] {\\r\\n      width: 80vw;\\r\\n      min-width: initial;\\r\\n    }\\r\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0cmlwZS1wYWllbWVudC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGNBQWM7QUFDZDtJQUNJLHNCQUFzQjtFQUN4QjtBQUVBO0lBQ0UsMERBQTBEO0lBQzFELGVBQWU7SUFDZixtQ0FBbUM7SUFDbkMsYUFBYTtJQUNiLHVCQUF1QjtJQUN2QixxQkFBcUI7SUFDckIsYUFBYTtJQUNiLFlBQVk7RUFDZDtBQUVBO0lBQ0UsV0FBVztJQUNYLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEI7a0ZBQzhFO0lBQzlFLGtCQUFrQjtJQUNsQixhQUFhO0VBQ2Y7QUFFQTtJQUNFLGFBQWE7RUFDZjtBQUVBO0lBQ0UseUJBQXlCO0lBQ3pCLGVBQWU7SUFDZixpQkFBaUI7SUFDakIsaUJBQWlCO0lBQ2pCLGtCQUFrQjtFQUNwQjtBQUVBO0lBQ0UsbUJBQW1CO0VBQ3JCO0FBRUEsc0JBQXNCO0FBQ3RCO0lBQ0UsbUJBQW1CO0lBQ25CLDhCQUE4QjtJQUM5QixjQUFjO0lBQ2Qsa0JBQWtCO0lBQ2xCLFNBQVM7SUFDVCxrQkFBa0I7SUFDbEIsZUFBZTtJQUNmLGdCQUFnQjtJQUNoQixlQUFlO0lBQ2YsY0FBYztJQUNkLHlCQUF5QjtJQUN6QixpREFBaUQ7SUFDakQsV0FBVztFQUNiO0FBQ0E7SUFDRSxzQkFBc0I7RUFDeEI7QUFDQTtJQUNFLFlBQVk7SUFDWixlQUFlO0VBQ2pCO0FBRUEscUNBQXFDO0FBQ3JDOzs7SUFHRSxrQkFBa0I7RUFDcEI7QUFDQTtJQUNFLGNBQWM7SUFDZCxlQUFlO0lBQ2YscUJBQXFCO0lBQ3JCLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEIsV0FBVztJQUNYLFlBQVk7SUFDWiwyQkFBMkI7SUFHM0Isd0JBQXdCO0VBQzFCO0FBQ0E7O0lBRUUsa0JBQWtCO0lBQ2xCLFdBQVc7RUFDYjtBQUNBO0lBQ0UsYUFBYTtJQUNiLGNBQWM7SUFDZCxtQkFBbUI7SUFDbkIsZ0NBQWdDO0lBQ2hDLFdBQVc7SUFDWCxZQUFZO0lBRVosK0JBQStCO0lBRS9CLHdDQUF3QztFQUMxQztBQUNBO0lBQ0UsYUFBYTtJQUNiLGNBQWM7SUFDZCxtQkFBbUI7SUFDbkIsZ0NBQWdDO0lBQ2hDLFdBQVc7SUFDWCxZQUFZO0lBRVosNEJBQTRCO0lBRTVCLG1DQUFtQztFQUNyQztBQVlBO0lBQ0U7TUFFRSx1QkFBdUI7SUFDekI7SUFDQTtNQUVFLHlCQUF5QjtJQUMzQjtFQUNGO0FBRUE7SUFDRTtNQUNFLFdBQVc7TUFDWCxrQkFBa0I7SUFDcEI7RUFDRiIsImZpbGUiOiJzdHJpcGUtcGFpZW1lbnQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIFZhcmlhYmxlcyAqL1xyXG4qIHtcclxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgfVxyXG4gIFxyXG4gIGJvZHkge1xyXG4gICAgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgc2Fucy1zZXJpZjtcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICAgIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgYWxpZ24tY29udGVudDogY2VudGVyO1xyXG4gICAgaGVpZ2h0OiAxMDB2aDtcclxuICAgIHdpZHRoOiAxMDB2dztcclxuICB9XHJcbiAgXHJcbiAgZm9ybSB7XHJcbiAgICB3aWR0aDogMzB2dztcclxuICAgIG1pbi13aWR0aDogNTAwcHg7XHJcbiAgICBhbGlnbi1zZWxmOiBjZW50ZXI7XHJcbiAgICBib3gtc2hhZG93OiAwcHggMHB4IDBweCAwLjVweCByZ2JhKDUwLCA1MCwgOTMsIDAuMSksXHJcbiAgICAgIDBweCAycHggNXB4IDBweCByZ2JhKDUwLCA1MCwgOTMsIDAuMSksIDBweCAxcHggMS41cHggMHB4IHJnYmEoMCwgMCwgMCwgMC4wNyk7XHJcbiAgICBib3JkZXItcmFkaXVzOiA3cHg7XHJcbiAgICBwYWRkaW5nOiA0MHB4O1xyXG4gIH1cclxuICBcclxuICAuaGlkZGVuIHtcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgfVxyXG4gIFxyXG4gICNwYXltZW50LW1lc3NhZ2Uge1xyXG4gICAgY29sb3I6IHJnYigxMDUsIDExNSwgMTM0KTtcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICAgIGxpbmUtaGVpZ2h0OiAyMHB4O1xyXG4gICAgcGFkZGluZy10b3A6IDEycHg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgfVxyXG4gIFxyXG4gICNwYXltZW50LWVsZW1lbnQge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMjRweDtcclxuICB9XHJcbiAgXHJcbiAgLyogQnV0dG9ucyBhbmQgbGlua3MgKi9cclxuICBidXR0b24ge1xyXG4gICAgYmFja2dyb3VuZDogIzU0NjlkNDtcclxuICAgIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjtcclxuICAgIGNvbG9yOiAjZmZmZmZmO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgYm9yZGVyOiAwO1xyXG4gICAgcGFkZGluZzogMTJweCAxNnB4O1xyXG4gICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcclxuICAgIGJveC1zaGFkb3c6IDBweCA0cHggNS41cHggMHB4IHJnYmEoMCwgMCwgMCwgMC4wNyk7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICB9XHJcbiAgYnV0dG9uOmhvdmVyIHtcclxuICAgIGZpbHRlcjogY29udHJhc3QoMTE1JSk7XHJcbiAgfVxyXG4gIGJ1dHRvbjpkaXNhYmxlZCB7XHJcbiAgICBvcGFjaXR5OiAwLjU7XHJcbiAgICBjdXJzb3I6IGRlZmF1bHQ7XHJcbiAgfVxyXG4gIFxyXG4gIC8qIHNwaW5uZXIvcHJvY2Vzc2luZyBzdGF0ZSwgZXJyb3JzICovXHJcbiAgLnNwaW5uZXIsXHJcbiAgLnNwaW5uZXI6YmVmb3JlLFxyXG4gIC5zcGlubmVyOmFmdGVyIHtcclxuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICB9XHJcbiAgLnNwaW5uZXIge1xyXG4gICAgY29sb3I6ICNmZmZmZmY7XHJcbiAgICBmb250LXNpemU6IDIycHg7XHJcbiAgICB0ZXh0LWluZGVudDogLTk5OTk5cHg7XHJcbiAgICBtYXJnaW46IDBweCBhdXRvO1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgd2lkdGg6IDIwcHg7XHJcbiAgICBoZWlnaHQ6IDIwcHg7XHJcbiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCAycHg7XHJcbiAgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTtcclxuICAgIC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7XHJcbiAgfVxyXG4gIC5zcGlubmVyOmJlZm9yZSxcclxuICAuc3Bpbm5lcjphZnRlciB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBjb250ZW50OiBcIlwiO1xyXG4gIH1cclxuICAuc3Bpbm5lcjpiZWZvcmUge1xyXG4gICAgd2lkdGg6IDEwLjRweDtcclxuICAgIGhlaWdodDogMjAuNHB4O1xyXG4gICAgYmFja2dyb3VuZDogIzU0NjlkNDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDIwLjRweCAwIDAgMjAuNHB4O1xyXG4gICAgdG9wOiAtMC4ycHg7XHJcbiAgICBsZWZ0OiAtMC4ycHg7XHJcbiAgICAtd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IDEwLjRweCAxMC4ycHg7XHJcbiAgICB0cmFuc2Zvcm0tb3JpZ2luOiAxMC40cHggMTAuMnB4O1xyXG4gICAgLXdlYmtpdC1hbmltYXRpb246IGxvYWRpbmcgMnMgaW5maW5pdGUgZWFzZSAxLjVzO1xyXG4gICAgYW5pbWF0aW9uOiBsb2FkaW5nIDJzIGluZmluaXRlIGVhc2UgMS41cztcclxuICB9XHJcbiAgLnNwaW5uZXI6YWZ0ZXIge1xyXG4gICAgd2lkdGg6IDEwLjRweDtcclxuICAgIGhlaWdodDogMTAuMnB4O1xyXG4gICAgYmFja2dyb3VuZDogIzU0NjlkNDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDAgMTAuMnB4IDEwLjJweCAwO1xyXG4gICAgdG9wOiAtMC4xcHg7XHJcbiAgICBsZWZ0OiAxMC4ycHg7XHJcbiAgICAtd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IDBweCAxMC4ycHg7XHJcbiAgICB0cmFuc2Zvcm0tb3JpZ2luOiAwcHggMTAuMnB4O1xyXG4gICAgLXdlYmtpdC1hbmltYXRpb246IGxvYWRpbmcgMnMgaW5maW5pdGUgZWFzZTtcclxuICAgIGFuaW1hdGlvbjogbG9hZGluZyAycyBpbmZpbml0ZSBlYXNlO1xyXG4gIH1cclxuICBcclxuICBALXdlYmtpdC1rZXlmcmFtZXMgbG9hZGluZyB7XHJcbiAgICAwJSB7XHJcbiAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XHJcbiAgICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xyXG4gICAgfVxyXG4gICAgMTAwJSB7XHJcbiAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTtcclxuICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTtcclxuICAgIH1cclxuICB9XHJcbiAgQGtleWZyYW1lcyBsb2FkaW5nIHtcclxuICAgIDAlIHtcclxuICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcclxuICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XHJcbiAgICB9XHJcbiAgICAxMDAlIHtcclxuICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xyXG4gICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7XHJcbiAgICBmb3JtIHtcclxuICAgICAgd2lkdGg6IDgwdnc7XHJcbiAgICAgIG1pbi13aWR0aDogaW5pdGlhbDtcclxuICAgIH1cclxuICB9Il19 */\"] });\r\n// Fetches a payment intent and captures the client secret\r\nasync function initialize(elements) {\r\n    const response = await fetch(\"/create-payment-intent\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ items }),\r\n    });\r\n    const { clientSecret } = await response.json();\r\n    const appearance = {\r\n        theme: 'stripe',\r\n    };\r\n    elements = stripe.elements({ appearance, clientSecret });\r\n    const paymentElement = elements.create(\"payment\");\r\n    paymentElement.mount(\"#payment-element\");\r\n}\r\nasync function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    const { error } = await stripe.confirmPayment({\r\n        confirmParams: {\r\n            // Make sure to change this to your payment completion page\r\n            return_url: \"http://localhost:4200/test\",\r\n        },\r\n    });\r\n    // This point will only be reached if there is an immediate error when\r\n    // confirming the payment. Otherwise, your customer will be redirected to\r\n    // your `return_url`. For some payment methods like iDEAL, your customer will\r\n    // be redirected to an intermediate site first to authorize the payment, then\r\n    // redirected to the `return_url`.\r\n    if (error.type === \"card_error\" || error.type === \"validation_error\") {\r\n        showMessage(error.message);\r\n    }\r\n    else {\r\n        showMessage(\"An unexpected error occured.\");\r\n    }\r\n    setLoading(false);\r\n}\r\n// Fetches the payment intent status after payment submission\r\nasync function checkStatus() {\r\n    const clientSecret = new URLSearchParams(window.location.search).get(\"payment_intent_client_secret\");\r\n    if (!clientSecret) {\r\n        return;\r\n    }\r\n    const { paymentIntent } = await stripe.retrievePaymentIntent(clientSecret);\r\n    switch (paymentIntent.status) {\r\n        case \"succeeded\":\r\n            showMessage(\"Payment succeeded!\");\r\n            break;\r\n        case \"processing\":\r\n            showMessage(\"Your payment is processing.\");\r\n            break;\r\n        case \"requires_payment_method\":\r\n            showMessage(\"Your payment was not successful, please try again.\");\r\n            break;\r\n        default:\r\n            showMessage(\"Something went wrong.\");\r\n            break;\r\n    }\r\n}\r\n// ------- UI helpers -------\r\nfunction showMessage(messageText) {\r\n    const messageContainer = document.querySelector(\"#payment-message\");\r\n    messageContainer.classList.remove(\"hidden\");\r\n    messageContainer.textContent = messageText;\r\n    setTimeout(function () {\r\n        messageContainer.classList.add(\"hidden\");\r\n        messageText.textContent = \"\";\r\n    }, 4000);\r\n}\r\n// Show a spinner on payment submission\r\nfunction setLoading(isLoading) {\r\n    if (isLoading) {\r\n        // Disable the button and show a spinner\r\n        document.querySelector(\"#submit\").disabled = true;\r\n        document.querySelector(\"#spinner\").classList.remove(\"hidden\");\r\n        document.querySelector(\"#button-text\").classList.add(\"hidden\");\r\n    }\r\n    else {\r\n        document.querySelector(\"#submit\").disabled = false;\r\n        document.querySelector(\"#spinner\").classList.add(\"hidden\");\r\n        document.querySelector(\"#button-text\").classList.remove(\"hidden\");\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}